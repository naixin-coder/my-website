"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4735],{3905:function(e,n,t){t.d(n,{Zo:function(){return p},kt:function(){return b}});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var c=r.createContext({}),s=function(e){var n=r.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},p=function(e){var n=s(e.components);return r.createElement(c.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=s(t),b=a,m=d["".concat(c,".").concat(b)]||d[b]||u[b]||i;return t?r.createElement(m,o(o({ref:n},p),{},{components:t})):r.createElement(m,o({ref:n},p))}));function b(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,o=new Array(i);o[0]=d;var l={};for(var c in n)hasOwnProperty.call(n,c)&&(l[c]=n[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var s=2;s<i;s++)o[s]=t[s];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},9655:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return l},contentTitle:function(){return c},metadata:function(){return s},toc:function(){return p},default:function(){return d}});var r=t(7462),a=t(3366),i=(t(7294),t(3905)),o=["components"],l={id:"webpack4-react",title:"webpack4+babel7+eslint+react\u914d\u7f6e"},c=void 0,s={unversionedId:"react/webpack4-react",id:"react/webpack4-react",isDocsHomePage:!1,title:"webpack4+babel7+eslint+react\u914d\u7f6e",description:"1. \u5b89\u88c5webpack\u3001babel7\u3001eslint",source:"@site/docs/react/webpack4-react.md",sourceDirName:"react",slug:"/react/webpack4-react",permalink:"/docs/react/webpack4-react",editUrl:"https://github.com/facebook/docusaurus/edit/main/website/docs/react/webpack4-react.md",tags:[],version:"current",frontMatter:{id:"webpack4-react",title:"webpack4+babel7+eslint+react\u914d\u7f6e"}},p=[{value:"1. \u5b89\u88c5webpack\u3001babel7\u3001eslint",id:"1-\u5b89\u88c5webpackbabel7eslint",children:[],level:3},{value:"2 \u65b0\u5efa\u521b\u5efa\u76f8\u5173\u6587\u4ef6",id:"2-\u65b0\u5efa\u521b\u5efa\u76f8\u5173\u6587\u4ef6",children:[],level:3},{value:"3. \u914d\u7f6ewebpack",id:"3-\u914d\u7f6ewebpack",children:[{value:"3.1 \u521b\u5efawebpack.common.config.js \u516c\u5171\u914d\u7f6e webpack.config.js \u751f\u4ea7\u65f6\u9700\u8981\u7684\u914d\u7f6e webpack.dev.config.js \u5f00\u53d1\u662f\u9700\u8981\u7684\u914d\u7f6e",id:"31-\u521b\u5efawebpackcommonconfigjs-\u516c\u5171\u914d\u7f6e-webpackconfigjs-\u751f\u4ea7\u65f6\u9700\u8981\u7684\u914d\u7f6e-webpackdevconfigjs-\u5f00\u53d1\u662f\u9700\u8981\u7684\u914d\u7f6e",children:[{value:"3.1.1 \u914d\u7f6ewebpack.common.config.js",id:"311-\u914d\u7f6ewebpackcommonconfigjs",children:[],level:5},{value:"3.1.2\u914d\u7f6ewebpack.dev.config.js",id:"312\u914d\u7f6ewebpackdevconfigjs",children:[],level:5},{value:"3.1.3 \u914d\u7f6ewebpack.prod.config.js",id:"313-\u914d\u7f6ewebpackprodconfigjs",children:[],level:5}],level:4}],level:3},{value:"4 \u914d\u7f6ebabel",id:"4-\u914d\u7f6ebabel",children:[{value:"4.1 \u65b0\u5efa\u4e00\u4e2a.babelrc\u6587\u4ef6",id:"41-\u65b0\u5efa\u4e00\u4e2ababelrc\u6587\u4ef6",children:[],level:4}],level:3},{value:"5\u914d\u7f6eeslint",id:"5\u914d\u7f6eeslint",children:[{value:"5.1\u914d\u7f6e.eslintrc.js",id:"51\u914d\u7f6eeslintrcjs",children:[],level:4}],level:3}],u={toc:p};function d(e){var n=e.components,t=(0,a.Z)(e,o);return(0,i.kt)("wrapper",(0,r.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h3",{id:"1-\u5b89\u88c5webpackbabel7eslint"},"1. \u5b89\u88c5webpack\u3001babel7\u3001eslint"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"npm init -y\nnpm install webpack webpack-cli --save-dev\n\n//\u5b89\u88c5babel\nnpm install babel-loader @babel/core @babel/preset-env @babel/preset-react @babel/plugin-transform-runtime -D\n\nnpm install babel-polyfill\n\n//\u5b89\u88c5eslint\nnpm install -g eslint\neslint --init\n\n//\u5b89\u88c5eslint\u4f9d\u8d56\nnpm install eslint babel-eslint eslint-config-airbnb eslint-config-standard eslint-loader eslint-plugin-import eslint-plugin-jsx-a11y eslint-plugin-node eslint-plugin-promise eslint-plugin-react eslint-plugin-standard -D\n\n//\u5b89\u88c5webpack\u4f9d\u8d56\u548c\u63d2\u4ef6\nnpm install autoprefixer clean-webpack-plugin compression-webpack-plugin css-loader extract-text-webpack-plugin@next file-loader html-webpack-plugin postcss-loader sass-loader style-loader uglifyjs-webpack-plugin url-loader webpack-dev-server webpack-merge -D\n\n//\u5b89\u88c5react\nnpm install react react-dom react-hot-loader react-redux react-router-dom redux\n")),(0,i.kt)("p",null,"\u6240\u6709\u4f9d\u8d56\u5982\u4e0b"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'"devDependencies": {\n    "@babel/core": "^7.3.4",\n    "@babel/plugin-transform-runtime": "^7.3.4",\n    "@babel/preset-env": "^7.3.4",\n    "@babel/preset-react": "^7.0.0",\n    "autoprefixer": "^9.4.9",\n    "babel-eslint": "^10.0.1",\n    "babel-loader": "^8.0.5",\n    "clean-webpack-plugin": "^1.0.1",\n    "compression-webpack-plugin": "^2.0.0",\n    "css-loader": "^2.1.0",\n    "eslint": "^5.14.1",\n    "eslint-config-airbnb": "^17.1.0",\n    "eslint-config-standard": "^12.0.0",\n    "eslint-loader": "^2.1.2",\n    "eslint-plugin-import": "^2.16.0",\n    "eslint-plugin-jsx-a11y": "^6.2.1",\n    "eslint-plugin-node": "^8.0.1",\n    "eslint-plugin-promise": "^4.0.1",\n    "eslint-plugin-react": "^7.12.4",\n    "eslint-plugin-standard": "^4.0.0",\n    "extract-text-webpack-plugin": "^4.0.0-beta.0",\n    "file-loader": "^3.0.1",\n    "html-webpack-plugin": "^3.2.0",\n    "postcss-loader": "^3.0.0",\n    "redux-devtools-extension": "^2.13.8",\n    "sass-loader": "^7.1.0",\n    "style-loader": "^0.23.1",\n    "uglifyjs-webpack-plugin": "^2.1.2",\n    "url-loader": "^1.1.2",\n    "webpack": "^4.29.6",\n    "webpack-cli": "^3.2.3",\n    "webpack-dev-server": "^3.2.1",\n    "webpack-merge": "^4.2.1"\n  },\n  "dependencies": {\n    "babel-polyfill": "^6.26.0",\n    "react": "^16.8.3",\n    "react-dom": "^16.8.3",\n    "react-hot-loader": "^4.7.1",\n    "react-redux": "^6.0.1",\n    "react-router-dom": "^4.3.1",\n    "redux": "^4.0.1"\n  }\n')),(0,i.kt)("h3",{id:"2-\u65b0\u5efa\u521b\u5efa\u76f8\u5173\u6587\u4ef6"},"2 \u65b0\u5efa\u521b\u5efa\u76f8\u5173\u6587\u4ef6"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"mkdir src\ntouch src/index.js src/index.html App.js\n")),(0,i.kt)("h3",{id:"3-\u914d\u7f6ewebpack"},"3. \u914d\u7f6ewebpack"),(0,i.kt)("h4",{id:"31-\u521b\u5efawebpackcommonconfigjs-\u516c\u5171\u914d\u7f6e-webpackconfigjs-\u751f\u4ea7\u65f6\u9700\u8981\u7684\u914d\u7f6e-webpackdevconfigjs-\u5f00\u53d1\u662f\u9700\u8981\u7684\u914d\u7f6e"},"3.1 \u521b\u5efawebpack.common.config.js \u516c\u5171\u914d\u7f6e webpack.config.js \u751f\u4ea7\u65f6\u9700\u8981\u7684\u914d\u7f6e webpack.dev.config.js \u5f00\u53d1\u662f\u9700\u8981\u7684\u914d\u7f6e"),(0,i.kt)("h5",{id:"311-\u914d\u7f6ewebpackcommonconfigjs"},"3.1.1 \u914d\u7f6ewebpack.common.config.js"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"const path = require('path');\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\nconst webpack = require('webpack');\n\nconst commonConfig = {\n  /* \u5165\u53e3 */\n  entry: {\n    app: [\n      'babel-polyfill',\n      path.join(__dirname, 'src/index.js')\n    ],\n    vendor: ['react', 'react-router-dom', 'redux', 'react-dom', 'react-redux'] // \u628areact\u7b49\u5e93\u751f\u6210\u6253\u5305\u5230vendor.hash.js\u91cc\u9762\u53bb\u3002\n  },\n  /* \u8f93\u51fa\u5230build\u6587\u4ef6\u5939\uff0c\u8f93\u51fa\u6587\u4ef6\u540d\u5b57\u4e3a[name].[chunkhash].js */\n  output: {\n    path: path.join(__dirname, './build'),\n    filename: '[name].[chunkhash].js',\n    chunkFilename: '[name].[chunkhash].js',\n    publicPath: '/'\n  },\n  /* src\u6587\u4ef6\u5939\u4e0b\u9762\u7684\u4ee5.js\u7ed3\u5c3e\u7684\u6587\u4ef6\uff0c\u8981\u4f7f\u7528babel\u89e3\u6790 */\n  /* cacheDirectory\u662f\u7528\u6765\u7f13\u5b58\u7f16\u8bd1\u7ed3\u679c\uff0c\u4e0b\u6b21\u7f16\u8bd1\u52a0\u901f */\n  module: {\n    rules: [{\n      test: /\\.js$/,\n      use: ['babel-loader?cacheDirectory=true'],\n      include: path.join(__dirname, 'src')\n    }, {\n      test: /\\.(png|jpg|gif|svg)$/,\n      use: [{\n        loader: 'url-loader',\n        options: {\n          limit: 8192 // \u5c0f\u4e8e\u7b49\u4e8e8K\u7684\u56fe\u7247\u4f1a\u88ab\u8f6c\u6210base64\u7f16\u7801\uff0c\u76f4\u63a5\u63d2\u5165HTML\u4e2d\uff0c\u51cf\u5c11HTTP\u8bf7\u6c42\u3002\n        }\n      }]\n    }]\n  },\n  plugins: [\n    new HtmlWebpackPlugin({// \u6bcf\u6b21\u81ea\u52a8\u628ajs\u63d2\u5165\u5230\u6a21\u677findex.html\u91cc\u9762\u53bb\n      filename: 'index.html',\n      template: path.join(__dirname, 'src/index.html')\n    }),\n    new webpack.HashedModuleIdsPlugin(),\n    new webpack.optimize.CommonsChunkPlugin({ // \u63d0\u53d6\u5e76\u7f13\u5b58\u516c\u5171\u5e93\n      name: 'vendor'\n    }),\n    new webpack.optimize.CommonsChunkPlugin({\n      name: 'runtime'\n    })\n  ]\n};\n\nmodule.exports = commonConfig;\n\n")),(0,i.kt)("h5",{id:"312\u914d\u7f6ewebpackdevconfigjs"},"3.1.2\u914d\u7f6ewebpack.dev.config.js"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"const merge = require('webpack-merge');\nconst path = require('path');\nconst webpack = require('webpack');\nconst commonConfig = require('./webpack.common.config.js');\n\nconst devConfig = {\n  devtool: 'inline-source-map',\n  entry: {\n    app: [\n      'babel-polyfill',\n      'react-hot-loader/patch',\n      path.join(__dirname, 'src/index.js')\n    ]\n  },\n  output: {\n    /* \u8fd9\u91cc\u672c\u6765\u5e94\u8be5\u662f[chunkhash]\u7684\uff0c\u4f46\u662f\u7531\u4e8e[chunkhash]\u548creact-hot-loader\u4e0d\u517c\u5bb9\u3002\u53ea\u80fd\u59a5\u534f */\n    filename: '[name].[hash].js'\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.css$/,\n        include: /node_modules/,\n        loader: 'style!css'\n      }, {\n        test: /\\.scss$/,\n        use: ['style-loader', 'css-loader', 'sass-loader', 'postcss-loader']\n      }]\n  },\n  devServer: {\n    contentBase: path.join(__dirname, './build'), // \u8ba9WEB\u670d\u52a1\u5668\u8fd0\u884c\u9759\u6001\u8d44\u6e90\uff08index.html\uff09\n    historyApiFallback: true,\n    host: '127.0.0.1',\n  },\n  plugins: [\n    new webpack.DefinePlugin({\n      'process.env': {\n        NODE_ENV: JSON.stringify('development')\n      }\n    })\n  ]\n};\n\nmodule.exports = merge({\n  customizeArray(a, b, key) {\n    /* entry.app\u4e0d\u5408\u5e76\uff0c\u5168\u66ff\u6362 */\n    if (key === 'entry.app') {\n      return b;\n    }\n    return undefined;\n  }\n})(commonConfig, devConfig);\n\n")),(0,i.kt)("h5",{id:"313-\u914d\u7f6ewebpackprodconfigjs"},"3.1.3 \u914d\u7f6ewebpack.prod.config.js"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"const merge = require('webpack-merge');\n\nconst webpack = require('webpack');\nconst UglifyJSPlugin = require('uglifyjs-webpack-plugin');\nconst CleanWebpackPlugin = require('clean-webpack-plugin');\nconst ExtractTextPlugin = require('extract-text-webpack-plugin');\nconst CompressionPlugin = require('compression-webpack-plugin');\nconst commonConfig = require('./webpack.common.config.js');\n\nconst publicConfig = {\n  devtool: 'cheap-module-source-map',\n  module: {\n    rules: [{\n      test: /\\.css$/,\n      use: ExtractTextPlugin.extract({\n        fallback: 'style-loader',\n        use: 'css-loader'\n      })\n    },\n    {\n      test: /\\.scss$/,\n      use: ['style-loader', 'css-loader', 'sass-loader', 'postcss-loader']\n    }]\n  },\n  plugins: [\n    new CleanWebpackPlugin(['build/*.*']),\n    new CompressionPlugin(), // \u63d0\u4f9b\u5e26 Content-Encoding \u7f16\u7801\u7684\u538b\u7f29\u7248\u7684\u8d44\u6e90\n    new UglifyJSPlugin(),\n    new webpack.DefinePlugin({\n      'process.env': {\n        NODE_ENV: JSON.stringify('production')\n      }\n    }),\n    new ExtractTextPlugin({\n      filename: '[name].[contenthash:5].css',\n      allChunks: true\n    })\n  ]\n\n};\n\nmodule.exports = merge(commonConfig, publicConfig);\n\n")),(0,i.kt)("h3",{id:"4-\u914d\u7f6ebabel"},"4 \u914d\u7f6ebabel"),(0,i.kt)("h4",{id:"41-\u65b0\u5efa\u4e00\u4e2ababelrc\u6587\u4ef6"},"4.1 \u65b0\u5efa\u4e00\u4e2a.babelrc\u6587\u4ef6"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'{\n  "presets": [\n    "@babel/preset-env",\n    "@babel/preset-react"\n  ],\n  "plugins": [\n    "react-hot-loader/babel",\n    "@babel/plugin-transform-runtime"\n  ]\n}\n')),(0,i.kt)("h3",{id:"5\u914d\u7f6eeslint"},"5\u914d\u7f6eeslint"),(0,i.kt)("h4",{id:"51\u914d\u7f6eeslintrcjs"},"5.1\u914d\u7f6e.eslintrc.js"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'module.exports = {\n    extends: "airbnb",\n    parserOptions: {\n        ecmaVersion: 7\n    },\n    parser: "babel-eslint",\n    env: {\n        browser: true,\n        webextensions: true,\n        // jest: true,\n        // jasmine: true\n    },\n    rules: {\n        "max-len": [\n            2,\n            {\n                code: 100,\n                comments: 100,\n                ignoreComments: true,\n                ignoreStrings: true,\n                ignoreTemplateLiterals: true,\n                ignoreRegExpLiterals: true,\n            },\n        ],\n        "object-shorthand": [\n            2,\n            "always",\n            {\n                "avoidExplicitReturnArrows": true\n            }\n        ],\n        "function-paren-newline": 0,\n        "class-methods-use-this": 0,\n        "comma-dangle": 0,\n        "prefer-destructuring": [\n            2,\n            {\n                "AssignmentExpression": {\n                    "array": false,\n                    "object": false,\n                },\n            }\n        ],\n        "import/extensions": "off",\n        "import/no-extraneous-dependencies": 1,\n        "import/no-unresolved": 1,\n        "import/prefer-default-export": 0,\n        "jsx-a11y/label-has-for": 0, // allow implicit label for input implementation\n        "jsx-a11y/no-static-element-interactions": 0,\n        "jsx-a11y/no-noninteractive-element-interactions": 0,\n        "jsx-a11y/mouse-events-have-key-events": 0,\n        "linebreak-style": "off",\n        "no-await-in-loop": 0,\n        "no-console": 0,\n        "no-empty-function": 1,\n        "no-param-reassign": 0, // [].reduce are easier with this turned off,\n        "no-restricted-syntax": [\n            2,\n            "DebuggerStatement",\n            "LabeledStatement",\n            "WithStatement"\n        ],\n        "no-shadow": 0,\n        "no-underscore-dangle": 0,\n        "no-unused-vars": 1,\n        "react/sort-comp": 0,\n        "react/forbid-prop-types": 0,\n        "react/jsx-closing-bracket-location": 0,\n        "jsx-a11y/click-events-have-key-events": 0,\n        "jsx-a11y/anchor-is-valid": 0,\n        "react/jsx-filename-extension": [\n            1,\n            {\n                extensions: [\n                    ".js",\n                    ".jsx"\n                ]\n            }\n        ],\n        "react/destructuring-assignment": [\'always\'\n        ],\n        "react/no-array-index-key": 0,\n        "react/require-default-props": 1,\n        "no-mixed-operators": 0,\n        "react/no-did-mount-set-state": 0, // dom size detection after mount may require setState in didMount\n    }\n};\n\n')))}d.isMDXComponent=!0}}]);